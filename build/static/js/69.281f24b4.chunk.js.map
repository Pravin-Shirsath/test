{"version":3,"sources":["Routes/dashboard/rechargeModal/index.js"],"names":["Recharge","props","useHistory","useState","loading","setRecharge","filteredRecharges","selectedPlan","setSelectedPlan","additionalspace","setAdditionalspace","amountTotal","setAmountTotal","JSON","parse","localStorage","getItem","couponText","setCouponText","discount","setDiscount","CoupanDiscount","useEffect","RechargePlan","accessToken","GetRechargedPlan","then","res","status","data","results","undefined","length","console","log","catch","err","ErrorHandling","response","discount_type","discount_value","parseInt","NotificationManager","error","calculate","DiscountCheck","PaybleAmount","className","name","content","title","id","match","map","item","i","colClasses","fullBlock","subscription_name","per_gb_rate","type","value","onChange","e","isNaN","parseFloat","Total","AddspceEvent","target","onClick","CuponValidCheck","setItem","stringify","Success","color","style","display","justifyContent","alignItems","padding"],"mappings":"mTAmCe,SAASA,EAASC,GACfC,cAAhB,IAEA,EAA8BC,oBAAS,GAAM,mBAAtCC,EAAO,KACd,GAD0B,KACMD,mBAAS,KAAG,mBAA3BE,GAAF,KAAa,MAC5B,EAAkDF,mBAAS,IAAG,mBAAvDG,EAAiB,KACxB,GAD8C,KACFH,mBAAS,IAAE,mBACvD,GADqB,KAAmB,KACAA,mBAAS,OAAK,mBAA/CI,EAAY,KAAEC,EAAe,KAEpC,EAA8CL,mBAAS,GAAE,mBAAlDM,EAAe,KAAEC,EAAkB,KAC1C,EAAwCP,mBAAS,GAAE,mBAGnD,GAHmB,KAAiB,KAGEA,mBAAS,IAAE,mBAA1CQ,EAAW,KAAEC,EAAc,KAClC,EAAoCT,mBAASU,KAAKC,MAAMC,aAAaC,QAAQ,gBAAkB,IAAG,mBAA3FC,EAAU,KAAEC,EAAa,KAChC,EAAgCf,mBAAS,GAAE,mBAApCgB,EAAQ,KAAEC,EAAW,KAC5B,EAA4CjB,mBAASU,KAAKC,MAAMC,aAAaC,QAAQ,cAAgB,CAAE,eAAkB,EAAG,cAAiB,KAAK,mBAA3IK,EAAc,KAAmB,KAKxCC,qBAAU,WACeP,aAAaC,QAAQ,cAC5CO,GACF,GAAG,IAKH,IAAMA,EAAe,WACnB,IAAMC,EAAcX,KAAKC,MAAMC,aAAaC,QAAQ,UAChC,OAAhBQ,GACFC,YAAiBD,EAAa,GAC3BE,MAAK,SAACC,GACL,GAAoB,OAAb,OAAHA,QAAG,IAAHA,OAAG,EAAHA,EAAKC,QAAgB,CAAC,IAAD,IACC,EACe,EACC,EAFxC,GAAO,OAAHD,QAAG,IAAHA,GAAS,QAAN,EAAHA,EAAKE,YAAI,OAAT,EAAWC,QACb,QAA0BC,IAAnB,OAAHJ,QAAG,IAAHA,GAAS,QAAN,EAAHA,EAAKE,YAAI,WAAN,EAAH,EAAWC,SACb,GAAiC,IAA1B,OAAHH,QAAG,IAAHA,GAAS,QAAN,EAAHA,EAAKE,YAAI,WAAN,EAAH,EAAWC,QAAQE,QACrBxB,EAAmB,OAAHmB,QAAG,IAAHA,GAAS,QAAN,EAAHA,EAAKE,YAAI,WAAN,EAAH,EAAWC,QAAQ,IAKzCzB,EAAe,OAAHsB,QAAG,IAAHA,GAAS,QAAN,EAAHA,EAAKE,YAAI,WAAN,EAAH,EAAWC,SACvBG,QAAQC,IAAI,gCAAiCP,EAE/C,MACEM,QAAQC,IAAI,+BAAgCP,EAEhD,IACCQ,OAAM,SAACC,GAAS,IAAD,EAEdC,YAAcD,GAIP,OAAHA,QAAG,IAAHA,GAAa,QAAV,EAAHA,EAAKE,gBAAQ,OAAb,EAAeV,MAKrB,GAEN,EAsCAN,qBAAU,YAlCU,WAClB,GAAqC,KAAjCD,EAAekB,cACjBnB,EAAY,QAEP,GAAqC,WAAjCC,EAAekB,cAEpBlB,EAAemB,gBAAkB7B,EACnCS,EAAYqB,SAASpB,EAAemB,kBAGpCpB,EAAY,GACM,GAAfT,GAED+B,sBAAoBC,MAAM,mCAAD,OAAoCF,SAASpB,EAAemB,gBAAe,kBAGnG,GAAoC,cAAhCnB,EAAekB,cAExB,GAAmB,GAAf5B,EAAkB,CACpB,IAAIiC,EAAYH,SAAS9B,IAAgB8B,SAASpB,EAAemB,gBAAkB,KACnFpB,EAAYwB,EAEd,MACExB,EAAY,EASlB,CAGEyB,EACF,GAAE,CAAClC,IAGH,IAwESmC,EAAc,WACpB,OAAGnC,GAAeQ,EACVsB,SAAS9B,GAAc8B,SAAStB,GAI/BsB,SAAS9B,EAGnB,EAIF,OACE,sBAAKoC,UAAU,kBAAiB,UAC9B,eAAC,IAAM,WACL,gCAAO,+BACP,sBAAMC,KAAK,cAAcC,QAAQ,yBAEnC,cAAC,IAAY,CACXC,MAAO,cAAC,IAAY,CAACC,GAAG,qBACxBC,MAAOnD,EAAMmD,QAGf,qBAAKL,UAAU,OAAM,SAClBzC,GACCA,EAAkB+C,KAAI,SAACC,EAAMC,GAG3B,OAAO,cAAC,IAAkB,CAExBC,WAAW,uCAEXC,WAAS,WAGT,qBAAKV,UAAU,6BAA4B,SACzC,yBAASA,UAAU,6EAA4E,SAC7F,sBAAKA,UAAU,4BAA2B,UAExC,qBAAIA,UAAU,GAAE,UAAM,OAAJO,QAAI,IAAJA,OAAI,EAAJA,EAAMI,kBAAkB,OAC1C,+BAAKJ,EAAKK,YAAY,2BAPvBJ,EAeT,MAOJ,eAAC,IAAkB,CAACE,WAAS,YAC3B,qBAAKV,UAAU,qCAAoC,SACjD,sBAAKA,UAAU,uBAAsB,UACnC,qBAAKA,UAAU,uBAAsB,SACnC,oBAAIA,UAAU,mBAAkB,SAAC,eAGnC,sBAAKA,UAAU,4CAA2C,UACxD,qBAAKA,UAAU,OAAM,SACnB,oBAAGA,UAAU,UAAS,UAAC,mBAAGA,UAAU,wBAAuB,SAAC,qBAAoB,IAAC,oBAAGA,UAAU,iCAAgC,UAAC,uBAAOa,KAAK,SAASC,MAAOpD,EAAiBqD,SAAU,SAACC,GAAC,OAzIjL,SAACA,GAIpB,GAHA9B,QAAQC,IAAI6B,SAAWA,EAAIC,MAAMD,MAG5BC,MAAMD,IAAY,KAANA,KAEHE,WAAWF,GACX,GACVnD,EAAe,GACfF,EAAmB,GACnBgC,sBAAoBC,MAAM,yDAC1BV,QAAQC,IAAI,KAEZxB,EAAmBqD,GAKjBxD,GAAc,CAChB,IAAI2D,EAASzB,SAASsB,GAAKtB,SAAqB,OAAZlC,QAAY,IAAZA,OAAY,EAAZA,EAAcoD,aAClD1B,QAAQC,IAAIgC,EAAO,SACdF,MAAME,GAGTtD,EAAe,GAFfA,EAAe6B,SAASyB,GAI5B,CAQJ,CAuG2MC,CAAaJ,EAAEK,OAAOP,MAAM,IAAI,OAAI,uBAAMd,UAAU,wBAAuB,UAAC,IAAc,OAAZxC,QAAY,IAAZA,OAAY,EAAZA,EAAcoD,YAAY,0BAGvS,qBAAKZ,UAAU,uBAAsB,SAAC,4BAAG,QAEzC,qBAAKA,UAAU,yBAAwB,SAAC,8BAAIpC,EAAY,kBAG1D,sBAAKoC,UAAU,6CAA4C,UACzD,qBAAKA,UAAU,OAAM,SACnB,8BAAG,sBAAMA,UAAU,iBAAgB,SAAC,uBAAOc,MAAO5C,EAAY6C,SAAU,SAACC,GAAC,OAAK7C,EAAc6C,EAAEK,OAAOP,MAAM,MAAW,IAAC,cAAC,IAAM,CAACQ,QA5G1H,WAClB,IAAM7C,EAAcX,KAAKC,MAAMC,aAAaC,QAAQ,UAClC,IAAdC,EACkB,OAAhBO,GAGF8C,YAAgB9C,EAAaP,GAC1BS,MAAK,SAACC,GAEqB,IAAD,EACH,GAFtBM,QAAQC,IAAI,UAAWP,GACH,OAAb,OAAHA,QAAG,IAAHA,OAAG,EAAHA,EAAKC,SACA,OAAHD,QAAG,IAAHA,GAAS,QAAN,EAAHA,EAAKE,YAAI,OAAT,EAAY,KACdd,aAAawD,QAAQ,WAAY1D,KAAK2D,UAAa,OAAH7C,QAAG,IAAHA,GAAS,QAAN,EAAHA,EAAKE,YAAI,WAAN,EAAH,EAAY,KAC5Dd,aAAawD,QAAQ,aAAc1D,KAAK2D,UAAUvD,IAClDyB,sBAAoB+B,QAAQ,gBAG9BxC,QAAQC,IAAI,+BAAgCP,EAEhD,IACCQ,OAAM,SAACC,GAENC,YAAcD,EAGhB,IAGJM,sBAAoBC,MAAM,uBAG9B,EA8EoK+B,MAAM,UAAUC,MAAO,CAAEC,QAAS,OAAQC,eAAgB,SAAUC,WAAY,UAAW,SAAC,sBAGpP,qBAAK/B,UAAU,MAAK,SAClB,mBAAGA,UAAU,mBAAkB,SAAC,QAGlC,qBAAKA,UAAU,yBAAwB,SAAC,8BAAG,sBAAMA,UAAU,4BAA2B,SAAC,MAAS5B,EAAS,kBAG3G,sBAAK4B,UAAU,4CAA2C,UACxD,qBAAKA,UAAU,SAEf,qBAAKA,UAAU,QAEf,qBAAKA,UAAU,QAAO,SACpB,oBAAGA,UAAU,mBAAkB,UAAC,IAAED,IAAe,kBAIrD,qBAAKC,UAAU,6CAA4C,SACzD,oBAAGA,UAAU,mBAAkB,UAAC,eAClB,iCAAOD,IAAe,kBAItC,qBAAKC,UAAU,4CAA2C,SACxD,4BACE,cAAC,IAAM,CAAC2B,MAAM,UAAUC,MAAO,CAAEI,QAAS,aAAc,SAAC,iCAKhE3E,GAAW,cAAC,IAAgB,SAIrC,C","file":"static/js/69.281f24b4.chunk.js","sourcesContent":["import \"./recharge.css\"\n\n/**\n * User Management Page\n */\nimport React, { useEffect, useState, useRef } from 'react'\nimport { Helmet } from 'react-helmet'\n\nimport { Link, useHistory } from 'react-router-dom';\n\n// page title bar\nimport PageTitleBar from '../../../Components/PageTitleBar/PageTitleBar'\n// intl messages\nimport IntlMessages from '../../../Util/IntlMessages'\n// rct card box\nimport RctCollapsibleCard from '../../../Components/RctCollapsibleCard/RctCollapsibleCard'\n// rct section loader\nimport RctSectionLoader from '../../../Components/RctSectionLoader/RctSectionLoader'\nimport '../../../Assets/css/user.css'\nimport \"../../../Assets/css/main.css\"\n\nimport {\n  Progress, Button,\n  Form,\n  FormGroup,\n  Label,\n  Input,\n  FormText,\n  Col,\n  FormFeedback, CustomInput\n} from 'reactstrap';\nimport { CuponValidCheck, GetRechargedPlan } from \"Api\";\nimport { NotificationManager } from 'react-notifications'\nimport { ErrorHandling } from \"Constants/ErrorHandling\";\n\nexport default function Recharge(props) {\n  const history = useHistory();\n\n  const [loading, setLoading] = useState(false)\n  const [recharge, setRecharge] = useState([])\n  const [filteredRecharges, setFilteredRecharges] = useState([])\n  const [totalPageCount, setTotalPageCount] = useState(0)\n  const [selectedPlan, setSelectedPlan] = useState(null)\n\n  const [additionalspace, setAdditionalspace] = useState(0)\n  const [paybleAmount, setPaybleAmount] = useState(0)\n\n  // amount total is calculation space * per gb rate\n  const [amountTotal, setAmountTotal] = useState(0)\n  const [couponText, setCouponText] = useState(JSON.parse(localStorage.getItem(\"Couponcode\")) || \"\")\n  const [discount, setDiscount] = useState(0)\n  const [CoupanDiscount, setCouponDiscount] = useState(JSON.parse(localStorage.getItem(\"Discount\")) || { \"discount_value\": 0, \"discount_type\": \"\" })\n\n\n\n\n  useEffect(() => {\n    const isLoggedInBool = localStorage.getItem(\"isLoggedIn\")\n    RechargePlan()\n  }, [])\n\n\n\n\n  const RechargePlan = () => {\n    const accessToken = JSON.parse(localStorage.getItem('token'))\n    if (accessToken !== null) {\n      GetRechargedPlan(accessToken, 1)\n        .then((res) => {\n          if (res?.status === 200) {\n            if (res?.data?.results) {\n              if (res?.data?.results != undefined) {\n                if (res?.data?.results.length == 1) {\n                  setSelectedPlan(res?.data?.results[0])\n                }\n              }\n            }\n\n            setRecharge(res?.data?.results);\n            console.log('Response fromRecharged list :', res)\n\n          } else {\n            console.log('Response from fromRecharged:', res)\n          }\n        })\n        .catch((err) => {\n\n          ErrorHandling(err)\n\n\n          // console.log(\"status of invalid token\", err?.response?.data, err?.response?.status)\n          if (err?.response?.status == 401) {\n\n          } else {\n            // console.log('Response from customerlist:', err)\n          }\n        })\n    }\n  }\n\n\n\n  const DiscountCheck=()=>{\n    if (CoupanDiscount.discount_type === \"\") {\n      setDiscount(0)\n\n    } else if (CoupanDiscount.discount_type === \"amount\") {\n\n      if (CoupanDiscount.discount_value <= amountTotal) {\n        setDiscount(parseInt(CoupanDiscount.discount_value))\n\n      } else {\n        setDiscount(0)\n        if(amountTotal != 0){\n\n          NotificationManager.error(`coupon can not be applied below ${parseInt(CoupanDiscount.discount_value)} rupees`);\n        }\n      }\n    } else if (CoupanDiscount.discount_type == \"percentage\") {\n\n      if (amountTotal != 0) {\n        let calculate = parseInt(amountTotal) * (parseInt(CoupanDiscount.discount_value) / 100)\n        setDiscount(calculate)\n\n      } else {\n        setDiscount(0)\n       \n\n      }\n\n\n\n    }\n\n  }\n\n  useEffect(()=>{\n    DiscountCheck()\n  },[amountTotal])\n\n\n  const AddspceEvent = (e) => {\n    console.log(e, typeof (e), isNaN(e))\n\n    /** if  AddSpace input value Nan or \" \" handle  and calculate amount handle*/\n    if (!isNaN(e) || e === '') {\n\n      let Value = parseFloat(e);\n      if (Value < 0) {\n        setAmountTotal(0)\n        setAdditionalspace(0)\n        NotificationManager.error(\"Value cannot be negative. Please enter a valid Value.\");\n        console.log(\"\");\n      } else {\n        setAdditionalspace(e)\n\n      }\n      /** if  selected pland is or default selllected plan is available pergb rate and add space calculation set*/\n\n      if (selectedPlan) {\n        let Total = (parseInt(e) * parseInt(selectedPlan?.per_gb_rate))\n        console.log(Total, \"total\")\n        if (!isNaN(Total)) {\n          setAmountTotal(parseInt(Total))\n        } else {\n          setAmountTotal(0)\n        }\n      }\n\n      /** if  Discount check */\n\n    \n\n    }\n\n  }\n\n\n\n\n  const CopanApplay = () => {\n    const accessToken = JSON.parse(localStorage.getItem('token'))\n    if (couponText != \"\") {\n      if (accessToken !== null) {\n\n\n        CuponValidCheck(accessToken, couponText)\n          .then((res) => {\n            console.log(\"coupan=\", res)\n            if (res?.status === 200) {\n              if (res?.data?.[0]) {\n                localStorage.setItem(\"Discount\", JSON.stringify(res?.data?.[0]))\n                localStorage.setItem(\"Couponcode\", JSON.stringify(couponText))\n                NotificationManager.Success(\"Copon Apply\");\n              }\n            } else {\n              console.log('Response from fromRecharged:', res)\n            }\n          })\n          .catch((err) => {\n\n            ErrorHandling(err)\n\n\n          })\n      }\n    } else {\n      NotificationManager.error(\"Coupon code is empty\");\n\n    }\n  }\n\n\n    const  PaybleAmount =()=>{\n     if(amountTotal >= discount){\n      return parseInt(amountTotal)- parseInt(discount)\n\n     }else{\n       \n       return parseInt(amountTotal)\n     }\n\n    }\n\n\n\n  return (\n    <div className=\"user-management\">\n      <Helmet>\n        <title>Automaton | Customers List</title>\n        <meta name=\"description\" content=\"Automaton Widgets\" />\n      </Helmet>\n      <PageTitleBar\n        title={<IntlMessages id=\"sidebar.recharge\" />}\n        match={props.match}\n      />\n\n      <div className=\"row \">\n        {filteredRecharges &&\n          filteredRecharges.map((item, i) => {\n\n\n            return <RctCollapsibleCard\n\n              colClasses=\"col-sm-12 col-md-3 col-lg-3  rounded\"\n\n              fullBlock\n              key={i}\n            >\n              <div className=\"shadow project-card-shadow\">\n                <section className=\"bg-primary text-white px-3 shadow rounded d-flex  align-items-center py-3 \">\n                  <div className=\"ml-4  align-items-center \">\n\n                    <h2 className=\"\">{item?.subscription_name} </h2>\n                    <h3>{item.per_gb_rate} ₹ / GB </h3>\n                  </div>\n                </section>\n\n\n              </div>\n\n            </RctCollapsibleCard>\n          })\n        }\n\n\n      </div>\n\n\n      <RctCollapsibleCard fullBlock>\n        <div className=\"table-responsive dark-primary-text\">\n          <div className='rechargeBoxContainer'>\n            <div className=\"heading dark-primary\">\n              <h1 className=\"globalFontFamily\">Recharge</h1>\n            </div>\n\n            <div className=\"firstRow recharge-modal-row light-primary\">\n              <div className=\"left\">\n                <p className=\"wrapper\"><p className=\"text globalFontFamily\">Additional Space</p> <p className=\"inputMaterial globalFontFamily\"><input type=\"number\" value={additionalspace} onChange={(e) => AddspceEvent(e.target.value)} /> GB <span className=\"diff globalFontFamily\">@{selectedPlan?.per_gb_rate} ₹ / GB</span></p></p>\n              </div>\n\n              <div className=\"mid globalFontFamily\"><p>=</p></div>\n\n              <div className=\"right globalFontFamily\"><p>{amountTotal} ₹</p></div>\n            </div>\n\n            <div className=\"secondRow recharge-modal-row light-primary\">\n              <div className=\"left\">\n                <p><span className=\"inputContainer\"><input value={couponText} onChange={(e) => setCouponText(e.target.value)} /></span> <Button onClick={CopanApplay} color=\"primary\" style={{ display: \"flex\", justifyContent: \"center\", alignItems: \"center\" }}>Apply Coupon</Button></p>\n              </div>\n\n              <div className=\"mid\">\n                <p className=\"globalFontFamily\">=</p>\n              </div>\n\n              <div className=\"right globalFontFamily\"><p><span className=\"operator globalFontFamily\">-</span>{discount} ₹</p></div>\n            </div>\n\n            <div className=\"thirdRow recharge-modal-row light-primary\">\n              <div className=\"left\"></div>\n\n              <div className=\"mid\"></div>\n\n              <div className=\"right\">\n                <p className=\"globalFontFamily\"> {PaybleAmount()} ₹</p>\n              </div>\n            </div>\n\n            <div className=\"fourthRow recharge-modal-row light-primary\">\n              <p className=\"globalFontFamily\">\n                Net Payable <span>{PaybleAmount()} ₹</span>\n              </p>\n            </div>\n\n            <div className=\"fifthRow recharge-modal-row light-primary\">\n              <p>\n                <Button color=\"primary\" style={{ padding: \"10px 50px\" }}>Proceed To Checkout</Button>\n              </p>\n            </div>\n          </div>\n        </div>\n        {loading && <RctSectionLoader />}\n      </RctCollapsibleCard>\n    </div>\n  )\n}\n"],"sourceRoot":""}