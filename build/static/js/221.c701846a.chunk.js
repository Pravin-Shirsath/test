(this.webpackJsonpreactify=this.webpackJsonpreactify||[]).push([[221],{2562:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return E}));var n=a(15),s=a(3),i=a(7),r=a(1),l=a(34),c=a(151),o=a(541),d=a(533),u=a(530),j=a(531),b=a(477),m=a(321),O=a(527),f=a(476),h=a(478),v=a(480),x=a(14),p=a(143),N=a.n(p),g=a(58),C=(a(169),a(0)),y=function(e){var t=e.addNewUserDetails,a=e.onChangeAddNewUserDetails;return Object(C.jsxs)(b.a,{className:"addNewCustomerForm",children:[Object(C.jsxs)(m.a,{children:[Object(C.jsx)(O.a,{for:"userName",children:"Username"}),Object(C.jsx)(f.a,{type:"text",name:"userName",id:"userName",placeholder:"Enter Username",value:t.name,onChange:function(e){return a("username",e.target.value)}})]}),Object(C.jsxs)(m.a,{children:[Object(C.jsx)(O.a,{for:"userEmail",children:"Email"}),Object(C.jsx)(f.a,{type:"email",name:"userEmail",id:"userEmail",placeholder:"Enter Email",value:t.email,onChange:function(e){return a("email",e.target.value)}})]}),Object(C.jsxs)(m.a,{children:[Object(C.jsx)(O.a,{for:"firstName",children:"First Name"}),Object(C.jsx)(f.a,{type:"text",name:"firstName",id:"firstName",placeholder:"Enter First Name",value:t.first_name,onChange:function(e){return a("first_name",e.target.value)}})]}),Object(C.jsxs)(m.a,{children:[Object(C.jsx)(O.a,{for:"lastName",children:"Last Name"}),Object(C.jsx)(f.a,{type:"text",name:"lastName",id:"lastName",placeholder:"Enter Last Name",value:t.last_name,onChange:function(e){return a("last_name",e.target.value)}})]}),Object(C.jsxs)(m.a,{children:[Object(C.jsx)(O.a,{for:"Contact",children:"Contact Number"}),Object(C.jsx)(f.a,{type:"number",name:"mobile",id:"mobile",placeholder:"Enter Contact Number",value:t.mobile_number,onChange:function(e){return a("mobile_number",e.target.value)}})]})]})},_=a(62),w=a(10),k=a(45),S=a(107),M=(a(170),a(40));function E(e){Object(g.g)(),Object(r.useRef)();var t=Object(r.useState)(),a=Object(i.a)(t,2),p=a[0],E=a[1],U=Object(r.useState)(),L=Object(i.a)(U,2),A=L[0],I=L[1],F=Object(r.useState)(null),R=Object(i.a)(F,2),D=R[0],J=R[1],P=Object(r.useState)(!1),$=Object(i.a)(P,2),z=$[0],T=$[1],B=Object(r.useState)(!1),Z=Object(i.a)(B,2),W=Z[0],q=Z[1],G=Object(r.useState)(!1),H=Object(i.a)(G,2),K=H[0],Q=H[1],V=Object(r.useState)(!1),X=Object(i.a)(V,2),Y=X[0],ee=X[1],te=Object(r.useState)(""),ae=Object(i.a)(te,2),ne=ae[0],se=ae[1],ie=Object(r.useState)(1),re=Object(i.a)(ie,2),le=re[0],ce=re[1],oe=Object(r.useState)(""),de=Object(i.a)(oe,2),ue=de[0],je=de[1],be=Object(r.useState)({username:"",email:"",first_name:"",last_name:"",mobile_number:""}),me=Object(i.a)(be,2),Oe=me[0],fe=me[1],he=Object(r.useState)({first_name:"",last_name:"",mobile_number:""}),ve=Object(i.a)(he,2),xe=(ve[0],ve[1],Object(r.useState)(!1)),pe=Object(i.a)(xe,2),Ne=pe[0],ge=pe[1],Ce=Object(r.useState)(null),ye=Object(i.a)(Ce,2),_e=(ye[0],ye[1],Object(r.useState)(0)),we=Object(i.a)(_e,2),ke=(we[0],we[1],Object(r.useState)()),Se=Object(i.a)(ke,2);Se[0],Se[1];Object(r.useEffect)((function(){localStorage.getItem("isLoggedIn");Me()}),[]);var Me=function(){var e=JSON.parse(localStorage.getItem("token"));null!==e&&Object(M.i)(e,le).then((function(e){var t,a,n;200===(null===e||void 0===e?void 0:e.status)&&(E(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.results),I(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.results),je(parseInt(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.count)))})).catch((function(e){var t;null===e||void 0===e||null===(t=e.response)||void 0===t||t.status}))},Ee=function(e,t){fe(Object(s.a)(Object(s.a)({},Oe),{},Object(n.a)({},e,t)))},Ue=function(){q(!1),fe({username:"",email:"",first_name:"",last_name:"",mobile_number:""})};return Object(C.jsxs)("div",{className:"user-management",children:[Object(C.jsxs)(l.a,{children:[Object(C.jsx)("title",{children:"Automaton | Customers List"}),Object(C.jsx)("meta",{name:"description",content:"Automaton Widgets"})]}),Object(C.jsx)(_.a,{title:Object(C.jsx)(w.a,{id:"sidebar.userManagement"}),match:e.match}),Object(C.jsxs)(k.a,{fullBlock:!0,children:[Object(C.jsxs)("div",{className:"table-responsive",children:[Object(C.jsxs)("div",{className:"d-flex py-20 px-10 border-bottom",style:{justifyContent:"space-between"},children:[Object(C.jsxs)("div",{className:"search-row",children:[Object(C.jsx)("input",{type:"text",placeholder:"Search",className:"search-input py-2",style:{border:"none",borderBottom:"1px solid black"},value:ne,onChange:function(e){return se(e.target.value)}}),Object(C.jsx)("button",{style:{backgroundColor:"#0b3d45",color:"#fff",borderRadius:"6px",cursor:"pointer"},className:"btn-block py-2 m-auto",onClick:function(){var e=JSON.parse(localStorage.getItem("token"));null!==e&&Object(M.l)(e,ne).then((function(e){var t,a;200===(null===e||void 0===e?void 0:e.status)&&(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.results.length)>0?(I(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.results),se("")):(I(p),se(""),x.NotificationManager.error("No user found!"))})).catch((function(e){}))},children:"Search"})]}),Object(C.jsxs)("button",{onClick:function(e){return function(e){e.preventDefault(),q(!0)}(e)},style:{backgroundColor:"#0b3d45",color:"#fff",borderRadius:"6px",cursor:"pointer"},className:"py-2 px-2",children:[Object(C.jsx)("i",{className:"zmdi zmdi-plus"})," Add New Customer"]})]}),Object(C.jsxs)("table",{className:"table table-middle table-hover mb-0",children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{}),Object(C.jsx)("th",{children:"Username"}),Object(C.jsx)("th",{children:"Email Address"}),Object(C.jsx)("th",{children:"First name"}),Object(C.jsx)("th",{children:"Last name"}),Object(C.jsx)("th",{children:"Contact No"}),Object(C.jsx)("th",{children:"Action"})]})}),Object(C.jsx)("tbody",{children:A&&A.map((function(e,t){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{}),Object(C.jsx)("td",{children:Object(C.jsx)("div",{className:"media",children:Object(C.jsx)("div",{className:"media-body",children:Object(C.jsx)("h5",{className:"mb-5 fw-bold",children:null===e||void 0===e?void 0:e.username})})})}),Object(C.jsx)("td",{children:null!==e&&void 0!==e&&e.email?null===e||void 0===e?void 0:e.email:"-"}),Object(C.jsx)("td",{children:null===e||void 0===e?void 0:e.first_name}),Object(C.jsx)("td",{children:null===e||void 0===e?void 0:e.last_name}),Object(C.jsx)("td",{style:{padding:"0px 45px"},children:null!==e&&void 0!==e&&e.mobile_number?null===e||void 0===e?void 0:e.mobile_number:"-"}),Object(C.jsxs)("td",{className:"list-action",children:[Object(C.jsx)("button",{type:"button",className:"rct-link-btn",onClick:function(){return t=e,console.log("User information:",t),ge(!0),void J(t);var t},children:Object(C.jsx)("i",{className:"ti-eye"})}),Object(C.jsx)("button",{type:"button",className:"rct-link-btn",onClick:function(){return function(e){Q(!0),fe(e),J(e)}(e)},children:Object(C.jsx)("i",{className:"ti-pencil"})}),Object(C.jsx)("button",{type:"button",className:"rct-link-btn",onClick:function(){return t=e,ee(!0),void J(t);var t},children:Object(C.jsx)("i",{className:"ti-close"})})]})]},t)}))})]}),(null===p||void 0===p?void 0:p.length)>0&&Object(C.jsx)("div",{className:"paginationDiv",children:Object(C.jsx)(N.a,{activePage:le,itemsCountPerPage:10,pageRangeDisplayed:5,onChange:function(e){return function(e){if(le!==e){var t=JSON.parse(localStorage.getItem("token"));null!==t&&Object(M.i)(t,e).then((function(e){var t,a,n;200===(null===e||void 0===e?void 0:e.status)&&(E(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.results),I(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.results),je(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.count))})).catch((function(e){})),ce(e)}}(e)},itemClass:"page-item",linkClass:"page-link",hideFirstLastPages:!0,totalItemsCount:ue})})]}),z&&Object(C.jsx)(S.a,{})]}),Object(C.jsxs)(o.a,{isOpen:W,toggle:function(){return Ue()},className:"addCustomerModal",children:[Object(C.jsx)(d.a,{toggle:function(){return Ue()},children:"Add New Customer"}),Object(C.jsx)(u.a,{children:Object(C.jsx)(y,{addNewUserDetails:Oe,onChangeAddNewUserDetails:Ee})}),Object(C.jsxs)(j.a,{children:[Object(C.jsx)(c.a,{variant:"contained",onClick:function(){return function(){var e=Oe.username,t=Oe.email,a=Oe.first_name,n=Oe.last_name,s=Oe.mobile_number,i=/^[a-zA-Z]{1,30}$/;if(""!==e&&""!==t&&""!==a&&""!==n&&""!==s)if(!0===/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t.trim("")))if(!0===i.test(a.trim("")))if(!0===i.test(n.trim("")))if(!0===/^\d{10}$/.test(s)){var r=JSON.parse(localStorage.getItem("token"));null!==r&&Object(M.b)(r,e.toLowerCase(),t.toLowerCase(),a,n,s).then((function(e){200===(null===e||void 0===e?void 0:e.status)&&(q(!1),T(!0),setTimeout((function(){var t;T(!1),Me(),x.NotificationManager.success(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)}),2e3),fe({username:"",email:"",first_name:"",last_name:"",mobile_number:""}),console.log("Response from addcustomer:",e))})).catch((function(e){var t,a;if(400===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)){var n,s,i,r,l,c,o=null===e||void 0===e||null===(n=e.response)||void 0===n||null===(s=n.data)||void 0===s||null===(i=s.email)||void 0===i?void 0:i[0],d=null===e||void 0===e||null===(r=e.response)||void 0===r||null===(l=r.data)||void 0===l||null===(c=l.username)||void 0===c?void 0:c[0];o&&d?(x.NotificationManager.error(o),x.NotificationManager.error(d)):o?x.NotificationManager.error(o):d&&x.NotificationManager.error(d)}else 500===(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.status)&&x.NotificationManager.error("Internal server error !")}))}else x.NotificationManager.error("Mobile Number must be 10 digits!");else x.NotificationManager.error("Last name must contain only alphabet and no spacings!");else x.NotificationManager.error("First name must contain only alphabet and no spacings!");else x.NotificationManager.error("Invalid email address format!");else x.NotificationManager.error("Please provide all customer details")}()},className:"py-2",style:{backgroundColor:"#0b3d45",color:"#fff",borderRadius:"6px"},children:"Add"}),Object(C.jsx)(c.a,{variant:"contained",onClick:function(){return Ue()},className:"py-2 px-3",style:{backgroundColor:"#E0E0E0",color:"#000",borderRadius:"6px",cursor:"pointer"},children:"Cancel"})]})]}),Object(C.jsxs)(o.a,{isOpen:K,className:"addCustomerModal",children:[Object(C.jsx)(d.a,{toggle:function(){return Q(!1)},children:"Update Customer"}),Object(C.jsx)(u.a,{children:Object(C.jsxs)(b.a,{children:[Object(C.jsxs)(m.a,{children:[Object(C.jsx)(O.a,{for:"firstName",children:"First Name"}),Object(C.jsx)(f.a,{type:"text",name:"firstName",id:"firstName",placeholder:"Enter First Name",value:Oe.first_name,onChange:function(e){return Ee("first_name",e.target.value)}})]}),Object(C.jsxs)(m.a,{children:[Object(C.jsx)(O.a,{for:"lastName",children:"Last Name"}),Object(C.jsx)(f.a,{type:"text",name:"lastName",id:"lastName",placeholder:"Enter Last Name",value:Oe.last_name,onChange:function(e){return Ee("last_name",e.target.value)}})]}),Object(C.jsxs)(m.a,{children:[Object(C.jsx)(O.a,{for:"Contact",children:"Contact Number"}),Object(C.jsx)(f.a,{type:"number",name:"mobile",id:"mobile",placeholder:"Enter Contact Number",value:Oe.mobile_number,onChange:function(e){return Ee("mobile_number",e.target.value)}})]})]})}),Object(C.jsxs)(j.a,{children:[Object(C.jsx)(c.a,{variant:"contained",style:{backgroundColor:"#0b3d45",color:"#fff",borderRadius:"6px"},className:"text-white",onClick:function(){var e=Oe.first_name,t=Oe.last_name,a=Oe.mobile_number,n=Oe.id,s=/^[a-zA-Z]{1,30}$/;if(""!==e&&""!==t&&""!==a)if(!0===s.test(e))if(!0===s.test(t))if(!0===/^\d{10}$/.test(a)){var i=JSON.parse(localStorage.getItem("token"));null!==i&&Object(M.s)(i,e,t,a,n).then((function(e){if(200===(null===e||void 0===e?void 0:e.status))Q(!1),T(!0),setTimeout((function(){T(!1),Me(),x.NotificationManager.success("Updated user successfully!")}),2e3),fe({username:"",email:"",first_name:"",last_name:"",mobile_number:""}),console.log("Response from updatecustomer:",e);else if(400===(null===e||void 0===e?void 0:e.status)){var t,a;q(!1),x.NotificationManager.error(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.email,null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.username)}else q(!1),x.NotificationManager.error("Error while updating customer")})).catch((function(e){x.NotificationManager.error("Error while updating customer")}))}else x.NotificationManager.error("Mobile Number must be 10 digits!");else x.NotificationManager.error("Last name must contain only alphabet and no spacings!");else x.NotificationManager.error("First name must contain only alphabet and no spacings!");else x.NotificationManager.error("Please provide all customer details")},children:"Update"}),Object(C.jsx)(c.a,{variant:"contained",className:"text-white btn-secondary",onClick:function(){Q(!1),fe({username:"",email:"",first_name:"",last_name:"",mobile_number:""})},children:"Cancel"})]})]}),Object(C.jsxs)(o.a,{isOpen:Y,className:"addCustomerModal",children:[Object(C.jsxs)(u.a,{children:["Are you sure want to delete ",null===D||void 0===D?void 0:D.username," ?"]}),Object(C.jsxs)(j.a,{children:[Object(C.jsx)(c.a,{variant:"contained",style:{backgroundColor:"#0b3d45",color:"#fff",borderRadius:"6px"},className:"text-white",onClick:function(){var e=D.id,t=JSON.parse(localStorage.getItem("token"));null!==t&&Object(M.f)(t,e).then((function(e){200===(null===e||void 0===e?void 0:e.status)?(ee(!1),T(!0),setTimeout((function(){T(!1),Me(),x.NotificationManager.success("User successfully deleted !! ")}),2e3)):(null===e||void 0===e||e.status,ee(!1),x.NotificationManager.error("Error while deleting customer"))})).catch((function(e){ee(!1),x.NotificationManager.error("Error while deleting customer")}))},children:"Delete"}),Object(C.jsx)(c.a,{variant:"contained",className:"text-white btn-secondary",onClick:function(){return ee(!1)},children:"Cancel"})]})]}),Object(C.jsx)(h.a,{onClose:function(){return ge(!1)},open:Ne,children:Object(C.jsx)(v.a,{className:"view_profile",children:null!==D&&Object(C.jsx)("div",{children:Object(C.jsx)("div",{className:"clearfix",children:Object(C.jsx)("div",{className:"media pull-left",children:Object(C.jsxs)("div",{className:"media-body",children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("p",{children:"Username : "}),Object(C.jsx)("span",{className:"fw-bold",children:D.username})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("p",{children:"First Name : "}),Object(C.jsx)("span",{className:"fw-bold",children:D.first_name})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("p",{children:"Last Name : "}),Object(C.jsx)("span",{className:"fw-bold",children:D.last_name})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("p",{children:"Email : "}),Object(C.jsx)("span",{className:"fw-bold",children:D.email})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("p",{children:"Contact Number : "}),Object(C.jsx)("span",{className:"fw-bold",children:D.mobile_number})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("p",{children:"User Type : "}),Object(C.jsx)("span",{className:"badge badge-warning",children:D.user_type})]})]})})})})})})]})}}}]);
//# sourceMappingURL=221.c701846a.chunk.js.map